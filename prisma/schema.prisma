// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["selectRelationCount"]
}

enum UserStatus {
  ONLINE
  OFFLINE
  LIVE
}

model User {
  id                  String     @id @default(uuid())
  email               String     @unique
  first_name          String
  middle_name         String?
  last_name           String?
  username            String     @unique
  password            String
  about               String     @default("")
  email_verified      Boolean    @default(false)
  blocked             Boolean    @default(false)
  last_ip             String?
  last_login          DateTime   @default(now())
  last_password_reset DateTime?
  phone_number        Int?
  phone_verified      Boolean    @default(false)
  avatar              String     @default("https://www.gravatar.com/avatar/00000000000000000000000000000000")
  status              UserStatus @default(OFFLINE)
  roles               Role[]
  fcm_tokens          String[]
  created_at          DateTime   @default(now())
  updated_at          DateTime   @updatedAt
}

model Role {
  id          String       @id @default(uuid())
  name        String       @unique
  description String?
  permissions Permission[]
  users       User[]
}

model Permission {
  id          String @id @default(uuid())
  name        String @unique
  description String
  route       String
  roles       Role[]
}
